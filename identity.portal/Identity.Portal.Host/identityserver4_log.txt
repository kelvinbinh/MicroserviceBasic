2019-09-08 21:19:22.411 +07:00 [INF] Starting IdentityServer4 version 2.5.3.0
2019-09-08 21:19:22.696 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-08 21:19:22.697 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-08 21:19:22.698 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-08 21:19:22.698 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-08 21:19:22.698 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-08 21:19:22.700 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-08 21:19:23.117 +07:00 [DBG] Starting grant removal
2019-09-08 21:19:24.124 +07:00 [DBG] Login Url: /Account/Login
2019-09-08 21:19:24.127 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-08 21:19:24.130 +07:00 [DBG] Logout Url: /Account/Logout
2019-09-08 21:19:24.133 +07:00 [DBG] ConsentUrl Url: /consent
2019-09-08 21:19:24.136 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-08 21:19:24.138 +07:00 [DBG] Error Url: /home/error
2019-09-08 21:19:24.143 +07:00 [DBG] Error Id Parameter: errorId
2019-09-08 21:19:35.417 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null.
Parameter name: connectionString
   at Microsoft.EntityFrameworkCore.Utilities.Check.NotEmpty(String value, String parameterName)
   at Microsoft.EntityFrameworkCore.SqlServerDbContextOptionsExtensions.UseSqlServer(DbContextOptionsBuilder optionsBuilder, String connectionString, Action`1 sqlServerOptionsAction)
   at Identity.Portal.Host.Startup.<>c__DisplayClass7_0.<ConfigureServices>b__1(DbContextOptionsBuilder options) in C:\Bussiness\MicroserviceBasic\identity.portal\Identity.Portal.Host\Startup.cs:line 43
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.<>c__DisplayClass1_0`2.<AddDbContext>b__0(IServiceProvider p, DbContextOptionsBuilder b)
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.DbContextOptionsFactory[TContext](IServiceProvider applicationServiceProvider, Action`2 optionsAction)
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.<>c__DisplayClass10_0`1.<AddCoreServices>b__0(IServiceProvider p)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(IServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScoped(ScopedCallSite scopedCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(IServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(IServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScoped(ScopedCallSite scopedCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(IServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(IServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScoped(ScopedCallSite scopedCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(IServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(IServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScoped(ScopedCallSite scopedCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(IServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.<>c__DisplayClass8_0.<CreateActivateInfo>b__1(ViewContext context)
   at Microsoft.Extensions.Internal.PropertyActivator`1.Activate(Object instance, TContext context)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.Activate(Object page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPageActivator.Activate(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.TagHelpers.PartialTagHelper.RenderPartialViewAsync(TextWriter writer, Object model, IView view)
   at Microsoft.AspNetCore.Mvc.TagHelpers.PartialTagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.RunAsync(TagHelperExecutionContext executionContext)
   at AspNetCore.Views_Shared__Layout.<ExecuteAsync>b__45_1()
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext.SetOutputContentAsync()
   at AspNetCore.Views_Shared__Layout.ExecuteAsync()
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderLayoutAsync(ViewContext context, ViewBufferTextWriter bodyWriter)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-09-08 21:24:40.137 +07:00 [INF] Starting IdentityServer4 version 2.5.3.0
2019-09-08 21:24:40.432 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-08 21:24:40.433 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-08 21:24:40.433 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-08 21:24:40.434 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-08 21:24:40.434 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-08 21:24:40.434 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-08 21:24:40.865 +07:00 [DBG] Starting grant removal
2019-09-08 21:24:42.087 +07:00 [DBG] Login Url: /Account/Login
2019-09-08 21:24:42.090 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-08 21:24:42.093 +07:00 [DBG] Logout Url: /Account/Logout
2019-09-08 21:24:42.095 +07:00 [DBG] ConsentUrl Url: /consent
2019-09-08 21:24:42.097 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-08 21:24:42.100 +07:00 [DBG] Error Url: /home/error
2019-09-08 21:24:42.102 +07:00 [DBG] Error Id Parameter: errorId
2019-09-08 21:24:45.451 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null.
Parameter name: connectionString
   at Microsoft.EntityFrameworkCore.Utilities.Check.NotEmpty(String value, String parameterName)
   at Microsoft.EntityFrameworkCore.SqlServerDbContextOptionsExtensions.UseSqlServer(DbContextOptionsBuilder optionsBuilder, String connectionString, Action`1 sqlServerOptionsAction)
   at Identity.Portal.Host.Startup.<>c__DisplayClass7_0.<ConfigureServices>b__1(DbContextOptionsBuilder options) in C:\Bussiness\MicroserviceBasic\identity.portal\Identity.Portal.Host\Startup.cs:line 43
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.<>c__DisplayClass1_0`2.<AddDbContext>b__0(IServiceProvider p, DbContextOptionsBuilder b)
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.DbContextOptionsFactory[TContext](IServiceProvider applicationServiceProvider, Action`2 optionsAction)
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.<>c__DisplayClass10_0`1.<AddCoreServices>b__0(IServiceProvider p)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(IServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScoped(ScopedCallSite scopedCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(IServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(IServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScoped(ScopedCallSite scopedCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(IServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(IServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScoped(ScopedCallSite scopedCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(IServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(IServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScoped(ScopedCallSite scopedCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(IServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.<>c__DisplayClass8_0.<CreateActivateInfo>b__1(ViewContext context)
   at Microsoft.Extensions.Internal.PropertyActivator`1.Activate(Object instance, TContext context)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorPagePropertyActivator.Activate(Object page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPageActivator.Activate(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.TagHelpers.PartialTagHelper.RenderPartialViewAsync(TextWriter writer, Object model, IView view)
   at Microsoft.AspNetCore.Mvc.TagHelpers.PartialTagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.RunAsync(TagHelperExecutionContext executionContext)
   at AspNetCore.Views_Shared__Layout.<ExecuteAsync>b__45_1()
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext.SetOutputContentAsync()
   at AspNetCore.Views_Shared__Layout.ExecuteAsync()
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderLayoutAsync(ViewContext context, ViewBufferTextWriter bodyWriter)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-09-08 21:27:12.703 +07:00 [INF] Starting IdentityServer4 version 2.5.3.0
2019-09-08 21:27:12.985 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-08 21:27:12.986 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-08 21:27:12.986 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-08 21:27:12.987 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-08 21:27:12.987 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-08 21:27:12.987 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-08 21:27:13.384 +07:00 [DBG] Starting grant removal
2019-09-08 21:27:14.214 +07:00 [DBG] Login Url: /Account/Login
2019-09-08 21:27:14.216 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-08 21:27:14.218 +07:00 [DBG] Logout Url: /Account/Logout
2019-09-08 21:27:14.219 +07:00 [DBG] ConsentUrl Url: /consent
2019-09-08 21:27:14.220 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-08 21:27:14.221 +07:00 [DBG] Error Url: /home/error
2019-09-08 21:27:14.221 +07:00 [DBG] Error Id Parameter: errorId
2019-09-08 21:28:58.248 +07:00 [INF] Starting IdentityServer4 version 2.5.3.0
2019-09-08 21:28:58.556 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-08 21:28:58.557 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-08 21:28:58.557 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-08 21:28:58.557 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-08 21:28:58.558 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-08 21:28:58.558 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-08 21:28:58.996 +07:00 [DBG] Starting grant removal
2019-09-08 21:28:59.732 +07:00 [DBG] Login Url: /Account/Login
2019-09-08 21:28:59.734 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-08 21:28:59.736 +07:00 [DBG] Logout Url: /Account/Logout
2019-09-08 21:28:59.737 +07:00 [DBG] ConsentUrl Url: /consent
2019-09-08 21:28:59.738 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-08 21:28:59.739 +07:00 [DBG] Error Url: /home/error
2019-09-08 21:28:59.739 +07:00 [DBG] Error Id Parameter: errorId
2019-09-08 21:29:58.211 +07:00 [INF] Starting IdentityServer4 version 2.5.3.0
2019-09-08 21:29:58.494 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-08 21:29:58.495 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-08 21:29:58.496 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-08 21:29:58.496 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-08 21:29:58.496 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-08 21:29:58.497 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-08 21:29:58.890 +07:00 [DBG] Starting grant removal
2019-09-08 21:29:59.677 +07:00 [DBG] Login Url: /Account/Login
2019-09-08 21:29:59.681 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-08 21:29:59.683 +07:00 [DBG] Logout Url: /Account/Logout
2019-09-08 21:29:59.684 +07:00 [DBG] ConsentUrl Url: /consent
2019-09-08 21:29:59.685 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-08 21:29:59.686 +07:00 [DBG] Error Url: /home/error
2019-09-08 21:29:59.686 +07:00 [DBG] Error Id Parameter: errorId
2019-09-08 21:32:24.153 +07:00 [INF] Starting IdentityServer4 version 2.5.3.0
2019-09-08 21:33:17.042 +07:00 [INF] Starting IdentityServer4 version 2.5.3.0
2019-09-08 21:34:01.549 +07:00 [INF] Starting IdentityServer4 version 2.5.3.0
2019-09-08 21:34:17.204 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-08 21:34:17.205 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-08 21:34:17.205 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-08 21:34:17.205 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-08 21:34:17.206 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-08 21:34:17.206 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-08 21:34:17.611 +07:00 [DBG] Starting grant removal
2019-09-08 21:34:18.498 +07:00 [DBG] Login Url: /Account/Login
2019-09-08 21:34:18.501 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-08 21:34:18.505 +07:00 [DBG] Logout Url: /Account/Logout
2019-09-08 21:34:18.507 +07:00 [DBG] ConsentUrl Url: /consent
2019-09-08 21:34:18.509 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-08 21:34:18.511 +07:00 [DBG] Error Url: /home/error
2019-09-08 21:34:18.516 +07:00 [DBG] Error Id Parameter: errorId
2019-09-08 21:50:07.126 +07:00 [INF] Starting IdentityServer4 version 2.5.3.0
2019-09-08 21:50:17.148 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-08 21:50:17.149 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-08 21:50:17.150 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-08 21:50:17.150 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-08 21:50:17.150 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-08 21:50:17.151 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-08 21:50:17.553 +07:00 [DBG] Starting grant removal
2019-09-08 21:50:18.215 +07:00 [DBG] Login Url: /Account/Login
2019-09-08 21:50:18.217 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-08 21:50:18.219 +07:00 [DBG] Logout Url: /Account/Logout
2019-09-08 21:50:18.220 +07:00 [DBG] ConsentUrl Url: /consent
2019-09-08 21:50:18.221 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-08 21:50:18.221 +07:00 [DBG] Error Url: /home/error
2019-09-08 21:50:18.222 +07:00 [DBG] Error Id Parameter: errorId
2019-09-08 21:50:30.810 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The partial view '_ValidationSummary' was not found. The following locations were searched:
/Views/Account/_ValidationSummary.cshtml
/Views/Shared/_ValidationSummary.cshtml
/Pages/Shared/_ValidationSummary.cshtml
   at Microsoft.AspNetCore.Mvc.TagHelpers.PartialTagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.RunAsync(TagHelperExecutionContext executionContext)
   at AspNetCore.Views_Account_Login.ExecuteAsync()
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-09-08 21:51:21.147 +07:00 [INF] Starting IdentityServer4 version 2.5.3.0
2019-09-08 21:51:21.456 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-08 21:51:21.457 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-08 21:51:21.457 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-08 21:51:21.458 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-08 21:51:21.458 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-08 21:51:21.458 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-08 21:51:21.893 +07:00 [DBG] Starting grant removal
2019-09-08 21:51:22.844 +07:00 [DBG] Login Url: /Account/Login
2019-09-08 21:51:22.847 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-08 21:51:22.849 +07:00 [DBG] Logout Url: /Account/Logout
2019-09-08 21:51:22.849 +07:00 [DBG] ConsentUrl Url: /consent
2019-09-08 21:51:22.850 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-08 21:51:22.851 +07:00 [DBG] Error Url: /home/error
2019-09-08 21:51:22.853 +07:00 [DBG] Error Id Parameter: errorId
2019-09-08 21:51:48.035 +07:00 [ERR] An error occurred using the connection to database 'IdentityDb' on server '.\SQLEXPRESS'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-6RLBANC\HuyLu'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
ClientConnectionId:32f748e2-3816-4b17-9523-9cf6b5bfcc13
Error Number:4060,State:1,Class:11
2019-09-08 21:51:48.158 +07:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Identity.Portal.Host.Data.ApplicationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-6RLBANC\HuyLu'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken) in D:\a\1\s\Ix.NET\Source\System.Interactive.Async\First.cs:line 144
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken) in D:\a\1\s\Ix.NET\Source\System.Interactive.Async\Select.cs:line 106
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken) in D:\a\1\s\Ix.NET\Source\System.Interactive.Async\AsyncIterator.cs:line 98
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
ClientConnectionId:32f748e2-3816-4b17-9523-9cf6b5bfcc13
Error Number:4060,State:1,Class:11
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-6RLBANC\HuyLu'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken) in D:\a\1\s\Ix.NET\Source\System.Interactive.Async\First.cs:line 144
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken) in D:\a\1\s\Ix.NET\Source\System.Interactive.Async\Select.cs:line 106
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken) in D:\a\1\s\Ix.NET\Source\System.Interactive.Async\AsyncIterator.cs:line 98
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
ClientConnectionId:32f748e2-3816-4b17-9523-9cf6b5bfcc13
Error Number:4060,State:1,Class:11
2019-09-08 21:51:48.209 +07:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Identity.Portal.Host.Data.ApplicationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-6RLBANC\HuyLu'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken) in D:\a\1\s\Ix.NET\Source\System.Interactive.Async\First.cs:line 144
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken) in D:\a\1\s\Ix.NET\Source\System.Interactive.Async\Select.cs:line 106
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken) in D:\a\1\s\Ix.NET\Source\System.Interactive.Async\AsyncIterator.cs:line 98
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
ClientConnectionId:32f748e2-3816-4b17-9523-9cf6b5bfcc13
Error Number:4060,State:1,Class:11
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-6RLBANC\HuyLu'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken) in D:\a\1\s\Ix.NET\Source\System.Interactive.Async\First.cs:line 144
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken) in D:\a\1\s\Ix.NET\Source\System.Interactive.Async\Select.cs:line 106
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken) in D:\a\1\s\Ix.NET\Source\System.Interactive.Async\AsyncIterator.cs:line 98
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
ClientConnectionId:32f748e2-3816-4b17-9523-9cf6b5bfcc13
Error Number:4060,State:1,Class:11
2019-09-08 22:51:22.109 +07:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
FROM [PersistedGrants] AS [x]
WHERE [x].[Expiration] < GETUTCDATE()
ORDER BY [x].[Key]
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PersistedGrants'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:566d3a30-9a34-4fd8-b427-81b4d790653a
Error Number:208,State:1,Class:16
2019-09-08 22:51:22.136 +07:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PersistedGrants'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:566d3a30-9a34-4fd8-b427-81b4d790653a
Error Number:208,State:1,Class:16
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PersistedGrants'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:566d3a30-9a34-4fd8-b427-81b4d790653a
Error Number:208,State:1,Class:16
2019-09-08 22:51:22.166 +07:00 [ERR] Exception removing expired grants: Invalid object name 'PersistedGrants'.
2019-09-08 23:31:48.592 +07:00 [INF] Starting IdentityServer4 version 2.5.3.0
2019-09-08 23:31:48.788 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-08 23:31:48.789 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-08 23:31:48.790 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-08 23:31:48.790 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-08 23:31:48.791 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-08 23:31:48.791 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-08 23:31:49.215 +07:00 [DBG] Starting grant removal
2019-09-08 23:31:50.201 +07:00 [DBG] Login Url: /Account/Login
2019-09-08 23:31:50.204 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-08 23:31:50.207 +07:00 [DBG] Logout Url: /Account/Logout
2019-09-08 23:31:50.210 +07:00 [DBG] ConsentUrl Url: /consent
2019-09-08 23:31:50.212 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-08 23:31:50.214 +07:00 [DBG] Error Url: /home/error
2019-09-08 23:31:50.217 +07:00 [DBG] Error Id Parameter: errorId
2019-09-09 00:04:20.419 +07:00 [INF] Starting IdentityServer4 version 2.5.3.0
2019-09-09 00:04:20.700 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-09 00:04:20.700 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-09 00:04:20.700 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-09 00:04:20.700 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-09 00:04:20.700 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-09 00:04:20.701 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-09 00:04:21.007 +07:00 [DBG] Starting grant removal
2019-09-09 00:04:21.090 +07:00 [WRN] Failed to determine the https port for redirect.
2019-09-09 00:04:21.155 +07:00 [DBG] Login Url: /Account/Login
2019-09-09 00:04:21.155 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-09 00:04:21.155 +07:00 [DBG] Logout Url: /Account/Logout
2019-09-09 00:04:21.155 +07:00 [DBG] ConsentUrl Url: /consent
2019-09-09 00:04:21.155 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-09 00:04:21.155 +07:00 [DBG] Error Url: /home/error
2019-09-09 00:04:21.155 +07:00 [DBG] Error Id Parameter: errorId
2019-09-09 00:10:13.535 +07:00 [DBG] Augmenting SignInContext
2019-09-09 00:10:13.538 +07:00 [DBG] Adding idp claim with value: local
2019-09-09 00:10:13.538 +07:00 [DBG] Adding amr claim with value: pwd
2019-09-09 00:10:13.538 +07:00 [DBG] Adding auth_time claim with value: 1567962613
2019-09-09 00:10:13.577 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-09-09 00:10:13.628 +07:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"2a0d3f81-38cf-4532-b875-df215eb89e16","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000003-0007-ff00-b63f-84710c7967bb","TimeStamp":"2019-09-08T17:10:13.0000000Z","ProcessId":16884,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-09-09 00:10:32.721 +07:00 [ERR] No consent request matching request: null
2019-09-09 00:10:32.895 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at AspNetCore.Views_Shared_Error.ExecuteAsync() in C:\Bussiness\MicroserviceBasic\identity.portal\Identity.Portal.Host\Views\Shared\Error.cshtml:line 9
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-09-09 00:11:18.038 +07:00 [DBG] 0 persisted grants found for 2a0d3f81-38cf-4532-b875-df215eb89e16
2019-09-09 00:14:13.605 +07:00 [INF] Starting IdentityServer4 version 2.5.3.0
2019-09-09 00:14:13.895 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-09 00:14:13.895 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-09 00:14:13.895 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-09 00:14:13.895 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-09 00:14:13.895 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-09 00:14:13.895 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-09 00:14:14.226 +07:00 [DBG] Starting grant removal
2019-09-09 00:14:14.297 +07:00 [WRN] Failed to determine the https port for redirect.
2019-09-09 00:14:14.365 +07:00 [DBG] Login Url: /Account/Login
2019-09-09 00:14:14.365 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-09 00:14:14.365 +07:00 [DBG] Logout Url: /Account/Logout
2019-09-09 00:14:14.365 +07:00 [DBG] ConsentUrl Url: /consent
2019-09-09 00:14:14.365 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-09 00:14:14.365 +07:00 [DBG] Error Url: /home/error
2019-09-09 00:14:14.366 +07:00 [DBG] Error Id Parameter: errorId
2019-09-09 00:16:51.468 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-09-09 00:16:51.473 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-09-09 00:16:51.473 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-09-09 00:16:51.477 +07:00 [DBG] Start discovery request
2019-09-09 00:16:52.797 +07:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-09-09 00:16:52.971 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-09-09 00:16:52.972 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-09-09 00:16:52.972 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-09-09 00:16:52.976 +07:00 [DBG] Start key discovery request
2019-09-09 00:16:53.044 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-09-09 00:16:53.056 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-09-09 00:16:53.056 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-09-09 00:16:53.061 +07:00 [DBG] Start authorize request
2019-09-09 00:16:53.074 +07:00 [DBG] User in authorize request: 2a0d3f81-38cf-4532-b875-df215eb89e16
2019-09-09 00:16:53.081 +07:00 [DBG] Start authorize request protocol validation
2019-09-09 00:16:53.451 +07:00 [DBG] mvc found in database: true
2019-09-09 00:16:53.464 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-09-09 00:16:53.489 +07:00 [ERR] Invalid redirect_uri: http://localhost:5001/signin-oidc
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"2a0d3f81-38cf-4532-b875-df215eb89e16","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5001/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"637035598130220365.NGEyNjA3MGEtZGRhNS00ZjBjLWJjYTgtN2E1N2FiNzU1NGEyYTQ0ZTkxOWUtZTMxMy00MGI3LThmMjEtMzgzYjgxZGU5ZDI3","state":"CfDJ8ANVG-xYhohNub-MDQHW8J89sEKqAMjO1nSW8zKOQ-vuyKG1sH_DGuzod0guV_ZDZuvtA2P3Pe5lk_OvqHUlrTVZMmOhYNa-hFwA77bTGvGh5hD-5pjf1Rg8_SObPu953Htrw8H-2_ma6vgJhj9T7ngtFZZ7HAp8Vs513CLLQ00OQ7GdDiWdW8ptuJAKWRWVmpkmenZ_zatThC1rI9nTBmp0APW6qLCcWGVdJtI0OYKOpshZyyWpBx9VvT86yY5JkaJ0A6VG0xddUvKudqg_qSAWFXSrCFLSjXbPL5PWJREMPI3bEerhucl806pXjN4lcclAYQ0R8LhBnJK2y-zpQRc","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-09-09 00:16:53.498 +07:00 [ERR] Request validation failed
2019-09-09 00:16:53.498 +07:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"2a0d3f81-38cf-4532-b875-df215eb89e16","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5001/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"637035598130220365.NGEyNjA3MGEtZGRhNS00ZjBjLWJjYTgtN2E1N2FiNzU1NGEyYTQ0ZTkxOWUtZTMxMy00MGI3LThmMjEtMzgzYjgxZGU5ZDI3","state":"CfDJ8ANVG-xYhohNub-MDQHW8J89sEKqAMjO1nSW8zKOQ-vuyKG1sH_DGuzod0guV_ZDZuvtA2P3Pe5lk_OvqHUlrTVZMmOhYNa-hFwA77bTGvGh5hD-5pjf1Rg8_SObPu953Htrw8H-2_ma6vgJhj9T7ngtFZZ7HAp8Vs513CLLQ00OQ7GdDiWdW8ptuJAKWRWVmpkmenZ_zatThC1rI9nTBmp0APW6qLCcWGVdJtI0OYKOpshZyyWpBx9VvT86yY5JkaJ0A6VG0xddUvKudqg_qSAWFXSrCFLSjXbPL5PWJREMPI3bEerhucl806pXjN4lcclAYQ0R8LhBnJK2y-zpQRc","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-09-09 00:16:53.521 +07:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Authorize","SubjectId":"2a0d3f81-38cf-4532-b875-df215eb89e16","Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"80000005-0006-ff00-b63f-84710c7967bb","TimeStamp":"2019-09-08T17:16:53.0000000Z","ProcessId":14700,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-09-09 00:17:54.450 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-09-09 00:17:54.460 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-09-09 00:17:54.460 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-09-09 00:17:54.460 +07:00 [DBG] Start discovery request
2019-09-09 00:17:54.465 +07:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-09-09 00:17:54.582 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-09-09 00:17:54.583 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-09-09 00:17:54.583 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-09-09 00:17:54.583 +07:00 [DBG] Start key discovery request
2019-09-09 00:17:54.630 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-09-09 00:17:54.632 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-09-09 00:17:54.632 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-09-09 00:17:54.632 +07:00 [DBG] Start authorize request
2019-09-09 00:17:54.632 +07:00 [DBG] User in authorize request: 2a0d3f81-38cf-4532-b875-df215eb89e16
2019-09-09 00:17:54.632 +07:00 [DBG] Start authorize request protocol validation
2019-09-09 00:17:54.637 +07:00 [DBG] mvc found in database: true
2019-09-09 00:17:54.637 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-09-09 00:17:54.637 +07:00 [ERR] Invalid redirect_uri: http://localhost:5001/signin-oidc
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"2a0d3f81-38cf-4532-b875-df215eb89e16","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5001/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"637035598746029997.NjhmYjJlOGQtYzcyOC00OTA5LWJjYmQtMTIyZTU4YjM3OWQ5MzZkZDY2ZDktY2ZkYy00NDQzLTgzZjctZTM1Nzk2YmEwMWJk","state":"CfDJ8ANVG-xYhohNub-MDQHW8J9ATKBb035eCmNQfsrgKgAb6HA2E2I590Jrn23vzraXqaXRal6woKVUKfkYGGKrabSeZwAjOpC3wH8eEvb1UIclJLkzdGdNN4kcdOaSkfIlAO-my58WDtKb_HMzNKOgB-AImX3xta8TQ1cRB2Qc70BfaYnB2lGSqiy057ax4JhMioQST49LNeOGFxjoBDJ8skkzpm1xGI1AEuCP7qJYd2z6LpNqvN-Y74dYs2qxJgtmRnYZdzNqdcNSts3eriwEwZWR5CAyHCjlwR_8XjQpTZtVbnNz8WTLyB4l9FM6iT5DhUeVmpLtPCOOVXfZssBjCds","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-09-09 00:17:54.637 +07:00 [ERR] Request validation failed
2019-09-09 00:17:54.637 +07:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"2a0d3f81-38cf-4532-b875-df215eb89e16","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5001/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"637035598746029997.NjhmYjJlOGQtYzcyOC00OTA5LWJjYmQtMTIyZTU4YjM3OWQ5MzZkZDY2ZDktY2ZkYy00NDQzLTgzZjctZTM1Nzk2YmEwMWJk","state":"CfDJ8ANVG-xYhohNub-MDQHW8J9ATKBb035eCmNQfsrgKgAb6HA2E2I590Jrn23vzraXqaXRal6woKVUKfkYGGKrabSeZwAjOpC3wH8eEvb1UIclJLkzdGdNN4kcdOaSkfIlAO-my58WDtKb_HMzNKOgB-AImX3xta8TQ1cRB2Qc70BfaYnB2lGSqiy057ax4JhMioQST49LNeOGFxjoBDJ8skkzpm1xGI1AEuCP7qJYd2z6LpNqvN-Y74dYs2qxJgtmRnYZdzNqdcNSts3eriwEwZWR5CAyHCjlwR_8XjQpTZtVbnNz8WTLyB4l9FM6iT5DhUeVmpLtPCOOVXfZssBjCds","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-09-09 00:17:54.638 +07:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Authorize","SubjectId":"2a0d3f81-38cf-4532-b875-df215eb89e16","Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"80000002-000c-ff00-b63f-84710c7967bb","TimeStamp":"2019-09-08T17:17:54.0000000Z","ProcessId":14700,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-09-09 00:18:30.313 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-09-09 00:18:30.313 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-09-09 00:18:30.314 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-09-09 00:18:30.315 +07:00 [INF] {"SubjectId":"2a0d3f81-38cf-4532-b875-df215eb89e16","DisplayName":"Alice Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"80000007-0010-ff00-b63f-84710c7967bb","TimeStamp":"2019-09-08T17:18:30.0000000Z","ProcessId":14700,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-09-09 00:18:45.226 +07:00 [DBG] Augmenting SignInContext
2019-09-09 00:18:45.229 +07:00 [DBG] Adding idp claim with value: local
2019-09-09 00:18:45.229 +07:00 [DBG] Adding amr claim with value: pwd
2019-09-09 00:18:45.229 +07:00 [DBG] Adding auth_time claim with value: 1567963125
2019-09-09 00:18:45.236 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-09-09 00:18:45.242 +07:00 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"654fd091-6498-4b5d-a1bb-470b574e754d","DisplayName":"bob","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000009-0010-ff00-b63f-84710c7967bb","TimeStamp":"2019-09-08T17:18:45.0000000Z","ProcessId":14700,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-09-09 00:19:25.721 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-09-09 00:19:25.725 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-09-09 00:19:25.725 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-09-09 00:19:25.725 +07:00 [DBG] Start authorize request
2019-09-09 00:19:25.726 +07:00 [DBG] User in authorize request: 654fd091-6498-4b5d-a1bb-470b574e754d
2019-09-09 00:19:25.726 +07:00 [DBG] Start authorize request protocol validation
2019-09-09 00:19:25.730 +07:00 [DBG] mvc found in database: true
2019-09-09 00:19:25.731 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-09-09 00:19:25.731 +07:00 [ERR] Invalid redirect_uri: http://localhost:5001/signin-oidc
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"654fd091-6498-4b5d-a1bb-470b574e754d","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5001/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"637035599657037228.NTBkOGZlZTAtNjlmOC00YzcxLTllMTQtOTAxZWIwZGEzZDIxMzZjYTUxOWMtY2FlOC00YjQyLThjMDAtN2VlNDRkOTM4MWQw","state":"CfDJ8ANVG-xYhohNub-MDQHW8J-aTZb_oZXQ5bnrfvSo3FLCfNYfhIMR4Ck523mQbT9ae8iao2rk1x8m48SjXQvzRhaCBtdD_C2qgrTDMNx0upMa97BGJgUBvrUYpW0hs3L8cAQWyPbKmIviqcHZtGd1Rg2y7Rr0LUDRih3fZvUGgD4gg2NjemVMncAjoXPR3qsp4r_o5UbdYvpI6Ixhzkpfpne5BUMc8eBeIgOQKd9CLrL_Xqjm3EMLYW-AsFATEpuc-MS-Evp75RMqVVN1lqktLuSEpfcGiuYM1bZR48kWCSUAveGnerNlBFRWST0ua1w_0Id40NVtsv71QqvH--Xorks","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-09-09 00:19:25.731 +07:00 [ERR] Request validation failed
2019-09-09 00:19:25.731 +07:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"654fd091-6498-4b5d-a1bb-470b574e754d","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5001/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"637035599657037228.NTBkOGZlZTAtNjlmOC00YzcxLTllMTQtOTAxZWIwZGEzZDIxMzZjYTUxOWMtY2FlOC00YjQyLThjMDAtN2VlNDRkOTM4MWQw","state":"CfDJ8ANVG-xYhohNub-MDQHW8J-aTZb_oZXQ5bnrfvSo3FLCfNYfhIMR4Ck523mQbT9ae8iao2rk1x8m48SjXQvzRhaCBtdD_C2qgrTDMNx0upMa97BGJgUBvrUYpW0hs3L8cAQWyPbKmIviqcHZtGd1Rg2y7Rr0LUDRih3fZvUGgD4gg2NjemVMncAjoXPR3qsp4r_o5UbdYvpI6Ixhzkpfpne5BUMc8eBeIgOQKd9CLrL_Xqjm3EMLYW-AsFATEpuc-MS-Evp75RMqVVN1lqktLuSEpfcGiuYM1bZR48kWCSUAveGnerNlBFRWST0ua1w_0Id40NVtsv71QqvH--Xorks","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-09-09 00:19:25.731 +07:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Authorize","SubjectId":"654fd091-6498-4b5d-a1bb-470b574e754d","Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"80000005-000e-ff00-b63f-84710c7967bb","TimeStamp":"2019-09-08T17:19:25.0000000Z","ProcessId":14700,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-09-09 00:20:53.422 +07:00 [INF] Starting IdentityServer4 version 2.5.3.0
2019-09-09 00:20:53.703 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-09 00:20:53.703 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-09 00:20:53.703 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-09 00:20:53.703 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-09 00:20:53.703 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-09 00:20:53.704 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-09 00:20:54.012 +07:00 [DBG] Starting grant removal
2019-09-09 00:20:54.077 +07:00 [WRN] Failed to determine the https port for redirect.
2019-09-09 00:20:54.143 +07:00 [DBG] Login Url: /Account/Login
2019-09-09 00:20:54.144 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-09 00:20:54.144 +07:00 [DBG] Logout Url: /Account/Logout
2019-09-09 00:20:54.144 +07:00 [DBG] ConsentUrl Url: /consent
2019-09-09 00:20:54.144 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-09 00:20:54.144 +07:00 [DBG] Error Url: /home/error
2019-09-09 00:20:54.144 +07:00 [DBG] Error Id Parameter: errorId
2019-09-09 00:21:41.150 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-09-09 00:21:41.154 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-09-09 00:21:41.154 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-09-09 00:21:41.158 +07:00 [DBG] Start discovery request
2019-09-09 00:21:42.384 +07:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-09-09 00:21:42.542 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-09-09 00:21:42.543 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-09-09 00:21:42.543 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-09-09 00:21:42.547 +07:00 [DBG] Start key discovery request
2019-09-09 00:21:42.619 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-09-09 00:21:42.631 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-09-09 00:21:42.631 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-09-09 00:21:42.636 +07:00 [DBG] Start authorize request
2019-09-09 00:21:42.649 +07:00 [DBG] User in authorize request: 654fd091-6498-4b5d-a1bb-470b574e754d
2019-09-09 00:21:42.655 +07:00 [DBG] Start authorize request protocol validation
2019-09-09 00:21:42.993 +07:00 [DBG] mvc found in database: true
2019-09-09 00:21:43.006 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-09-09 00:21:43.033 +07:00 [ERR] Invalid redirect_uri: http://localhost:5001/signin-oidc
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"654fd091-6498-4b5d-a1bb-470b574e754d","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5001/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"637035601025898576.YTQ5ZmQ1ZDctYTEzZC00ZDVjLTk5NzItNDdkNjYxNjA1YTc1MDZkNzQ4NzEtZDgwMy00Njk3LTk0M2YtNDc3NmRmYTVjMDIz","state":"CfDJ8ANVG-xYhohNub-MDQHW8J-Smbq3pRBA9u7eJ62QUNUvGLK7FHWTbUwyzO3SnSIm36d4fxhARbpdyX3mfECI_Y6e08C-geYZ9ySq8wBwyTdn4sheYo6ejjZ6t_NVuFeLZxBD1m5-tSs0--MMBIbM3IQMbEWfzZH2qaUujNYZt3B8lVHofTTUSi4ouGsJ9whSXX8zxCtAFU5b4rPD9piY7vXIbkpQ7H1u28MHWWjlTEMX25D_yeRon7Zf07ddzqM15Uqupf7DeIrwgFbjB5TujSMHMLnV3ZYkpU7eX-rEdWVDxiTOJUUAPsCj7gBd59swUdYJq9hrSHxPZhqjET8ERK4","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-09-09 00:21:43.041 +07:00 [ERR] Request validation failed
2019-09-09 00:21:43.041 +07:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"654fd091-6498-4b5d-a1bb-470b574e754d","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5001/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"637035601025898576.YTQ5ZmQ1ZDctYTEzZC00ZDVjLTk5NzItNDdkNjYxNjA1YTc1MDZkNzQ4NzEtZDgwMy00Njk3LTk0M2YtNDc3NmRmYTVjMDIz","state":"CfDJ8ANVG-xYhohNub-MDQHW8J-Smbq3pRBA9u7eJ62QUNUvGLK7FHWTbUwyzO3SnSIm36d4fxhARbpdyX3mfECI_Y6e08C-geYZ9ySq8wBwyTdn4sheYo6ejjZ6t_NVuFeLZxBD1m5-tSs0--MMBIbM3IQMbEWfzZH2qaUujNYZt3B8lVHofTTUSi4ouGsJ9whSXX8zxCtAFU5b4rPD9piY7vXIbkpQ7H1u28MHWWjlTEMX25D_yeRon7Zf07ddzqM15Uqupf7DeIrwgFbjB5TujSMHMLnV3ZYkpU7eX-rEdWVDxiTOJUUAPsCj7gBd59swUdYJq9hrSHxPZhqjET8ERK4","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-09-09 00:21:43.063 +07:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Authorize","SubjectId":"654fd091-6498-4b5d-a1bb-470b574e754d","Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"80000006-0007-ff00-b63f-84710c7967bb","TimeStamp":"2019-09-08T17:21:43.0000000Z","ProcessId":1408,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-09-09 00:36:56.150 +07:00 [INF] Starting IdentityServer4 version 2.5.3.0
2019-09-09 00:36:56.439 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-09 00:36:56.439 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-09 00:36:56.439 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-09 00:36:56.439 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-09 00:36:56.439 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-09 00:36:56.439 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-09 00:36:56.767 +07:00 [DBG] Starting grant removal
2019-09-09 00:36:56.888 +07:00 [DBG] Login Url: /Account/Login
2019-09-09 00:36:56.890 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-09 00:36:56.890 +07:00 [DBG] Logout Url: /Account/Logout
2019-09-09 00:36:56.890 +07:00 [DBG] ConsentUrl Url: /consent
2019-09-09 00:36:56.890 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-09 00:36:56.890 +07:00 [DBG] Error Url: /home/error
2019-09-09 00:36:56.891 +07:00 [DBG] Error Id Parameter: errorId
2019-09-09 00:37:44.317 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-09-09 00:37:44.322 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-09-09 00:37:44.322 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-09-09 00:37:44.326 +07:00 [DBG] Start discovery request
2019-09-09 00:37:45.579 +07:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-09-09 00:37:45.736 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-09-09 00:37:45.737 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-09-09 00:37:45.737 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-09-09 00:37:45.741 +07:00 [DBG] Start key discovery request
2019-09-09 00:37:45.813 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-09-09 00:37:45.825 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-09-09 00:37:45.825 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-09-09 00:37:45.830 +07:00 [DBG] Start authorize request
2019-09-09 00:37:45.843 +07:00 [DBG] User in authorize request: 654fd091-6498-4b5d-a1bb-470b574e754d
2019-09-09 00:37:45.850 +07:00 [DBG] Start authorize request protocol validation
2019-09-09 00:37:46.176 +07:00 [DBG] mvc found in database: true
2019-09-09 00:37:46.189 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-09-09 00:37:46.214 +07:00 [ERR] Invalid redirect_uri: http://localhost:5001/signin-oidc
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"654fd091-6498-4b5d-a1bb-470b574e754d","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5001/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"637035610657833936.YWIyMDNmY2ItZTUxNy00NDU1LWI2NWUtYmFkODIyYTg4NWI5ZDIyY2QwZjctZDAwMS00YmRhLTljYWYtNTM3ZTIxM2FlMzVj","state":"CfDJ8ANVG-xYhohNub-MDQHW8J_okBXeKtvZGkEa6ZzlQoYPYd_Lq4TrKUkRnxzlRYoE-C0fM9CeqfMjGvwSdn5Tk8GDZNvRL1TT21yxgqSfsNB1GksFi3d60qWI5KNCATAwrKyWJXTMLAmkedJkpPExqpVPl6rT7nVOM-14IPlh8JLr5LzhkmufQUZrnarB0KHLSD5vZu4wZIVdoVtMudVbLN9zgkDYimDXDvmLdDSixrODDW800RPgnAdSyTmUYCST_1ZeRSS8KtV7WgggcH61tJykDT10D-cugOcQGMdwfSopIN-4z72P4IYDEfwN9jGK276YzOaHuRGd6u3WY0tbuMw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-09-09 00:37:46.222 +07:00 [ERR] Request validation failed
2019-09-09 00:37:46.222 +07:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"654fd091-6498-4b5d-a1bb-470b574e754d","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5001/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"637035610657833936.YWIyMDNmY2ItZTUxNy00NDU1LWI2NWUtYmFkODIyYTg4NWI5ZDIyY2QwZjctZDAwMS00YmRhLTljYWYtNTM3ZTIxM2FlMzVj","state":"CfDJ8ANVG-xYhohNub-MDQHW8J_okBXeKtvZGkEa6ZzlQoYPYd_Lq4TrKUkRnxzlRYoE-C0fM9CeqfMjGvwSdn5Tk8GDZNvRL1TT21yxgqSfsNB1GksFi3d60qWI5KNCATAwrKyWJXTMLAmkedJkpPExqpVPl6rT7nVOM-14IPlh8JLr5LzhkmufQUZrnarB0KHLSD5vZu4wZIVdoVtMudVbLN9zgkDYimDXDvmLdDSixrODDW800RPgnAdSyTmUYCST_1ZeRSS8KtV7WgggcH61tJykDT10D-cugOcQGMdwfSopIN-4z72P4IYDEfwN9jGK276YzOaHuRGd6u3WY0tbuMw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-09-09 00:37:46.244 +07:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Authorize","SubjectId":"654fd091-6498-4b5d-a1bb-470b574e754d","Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"8000000b-0006-ff00-b63f-84710c7967bb","TimeStamp":"2019-09-08T17:37:46.0000000Z","ProcessId":9644,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-09-09 00:39:56.688 +07:00 [INF] Starting IdentityServer4 version 2.5.3.0
2019-09-09 00:39:56.978 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-09 00:39:56.978 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-09 00:39:56.978 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-09 00:39:56.978 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-09 00:39:56.978 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-09 00:39:56.978 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-09 00:39:57.292 +07:00 [DBG] Starting grant removal
2019-09-09 00:39:57.410 +07:00 [DBG] Login Url: /Account/Login
2019-09-09 00:39:57.413 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-09 00:39:57.413 +07:00 [DBG] Logout Url: /Account/Logout
2019-09-09 00:39:57.413 +07:00 [DBG] ConsentUrl Url: /consent
2019-09-09 00:39:57.413 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-09 00:39:57.413 +07:00 [DBG] Error Url: /home/error
2019-09-09 00:39:57.413 +07:00 [DBG] Error Id Parameter: errorId
2019-09-09 00:46:32.787 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-09-09 00:46:32.788 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-09-09 00:46:32.788 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-09-09 00:46:32.819 +07:00 [INF] {"SubjectId":"654fd091-6498-4b5d-a1bb-470b574e754d","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"8000000a-0012-fe00-b63f-84710c7967bb","TimeStamp":"2019-09-08T17:46:32.0000000Z","ProcessId":20820,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-09-09 00:49:50.750 +07:00 [DBG] Augmenting SignInContext
2019-09-09 00:49:50.752 +07:00 [DBG] Adding idp claim with value: local
2019-09-09 00:49:50.753 +07:00 [DBG] Adding amr claim with value: pwd
2019-09-09 00:49:50.753 +07:00 [DBG] Adding auth_time claim with value: 1567964990
2019-09-09 00:49:50.760 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-09-09 00:49:50.768 +07:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"2a0d3f81-38cf-4532-b875-df215eb89e16","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000005-000d-ff00-b63f-84710c7967bb","TimeStamp":"2019-09-08T17:49:50.0000000Z","ProcessId":20820,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-09-09 00:49:55.976 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-09-09 00:49:55.976 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-09-09 00:49:55.976 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-09-09 00:49:55.977 +07:00 [INF] {"SubjectId":"2a0d3f81-38cf-4532-b875-df215eb89e16","DisplayName":"Alice Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"80000005-000d-fe00-b63f-84710c7967bb","TimeStamp":"2019-09-08T17:49:55.0000000Z","ProcessId":20820,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-09-09 00:50:54.044 +07:00 [DBG] Augmenting SignInContext
2019-09-09 00:50:54.044 +07:00 [DBG] Adding idp claim with value: local
2019-09-09 00:50:54.044 +07:00 [DBG] Adding amr claim with value: pwd
2019-09-09 00:50:54.045 +07:00 [DBG] Adding auth_time claim with value: 1567965054
2019-09-09 00:50:54.045 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-09-09 00:50:54.047 +07:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"2a0d3f81-38cf-4532-b875-df215eb89e16","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000005-000f-fc00-b63f-84710c7967bb","TimeStamp":"2019-09-08T17:50:54.0000000Z","ProcessId":20820,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-09-09 00:50:59.600 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-09-09 00:50:59.600 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-09-09 00:50:59.600 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-09-09 00:50:59.601 +07:00 [INF] {"SubjectId":"2a0d3f81-38cf-4532-b875-df215eb89e16","DisplayName":"Alice Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"80000007-0010-fd00-b63f-84710c7967bb","TimeStamp":"2019-09-08T17:50:59.0000000Z","ProcessId":20820,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-09-09 00:53:13.824 +07:00 [INF] Starting IdentityServer4 version 2.5.3.0
2019-09-09 00:53:14.110 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-09 00:53:14.110 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-09 00:53:14.110 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-09 00:53:14.110 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-09 00:53:14.111 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-09 00:53:14.111 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-09 00:53:14.459 +07:00 [DBG] Starting grant removal
2019-09-09 00:53:14.602 +07:00 [DBG] Login Url: /Account/Login
2019-09-09 00:53:14.605 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-09 00:53:14.605 +07:00 [DBG] Logout Url: /Account/Logout
2019-09-09 00:53:14.605 +07:00 [DBG] ConsentUrl Url: /consent
2019-09-09 00:53:14.605 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-09 00:53:14.605 +07:00 [DBG] Error Url: /home/error
2019-09-09 00:53:14.605 +07:00 [DBG] Error Id Parameter: errorId
2019-09-09 00:53:30.409 +07:00 [INF] Starting IdentityServer4 version 2.5.3.0
2019-09-09 00:53:30.690 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-09 00:53:30.691 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-09 00:53:30.692 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-09 00:53:30.692 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-09 00:53:30.692 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-09 00:53:30.693 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-09 00:53:31.043 +07:00 [DBG] Starting grant removal
2019-09-09 00:53:32.236 +07:00 [DBG] Login Url: /Account/Login
2019-09-09 00:53:32.239 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-09 00:53:32.242 +07:00 [DBG] Logout Url: /Account/Logout
2019-09-09 00:53:32.244 +07:00 [DBG] ConsentUrl Url: /consent
2019-09-09 00:53:32.247 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-09 00:53:32.249 +07:00 [DBG] Error Url: /home/error
2019-09-09 00:53:32.251 +07:00 [DBG] Error Id Parameter: errorId
2019-09-09 00:53:53.732 +07:00 [INF] Starting IdentityServer4 version 2.5.3.0
2019-09-09 00:53:54.006 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-09 00:53:54.007 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-09 00:53:54.008 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-09 00:53:54.008 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-09 00:53:54.008 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-09 00:53:54.009 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-09 00:53:54.346 +07:00 [DBG] Starting grant removal
2019-09-09 00:53:55.221 +07:00 [DBG] Login Url: /Account/Login
2019-09-09 00:53:55.224 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-09 00:53:55.227 +07:00 [DBG] Logout Url: /Account/Logout
2019-09-09 00:53:55.229 +07:00 [DBG] ConsentUrl Url: /consent
2019-09-09 00:53:55.231 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-09 00:53:55.233 +07:00 [DBG] Error Url: /home/error
2019-09-09 00:53:55.235 +07:00 [DBG] Error Id Parameter: errorId
2019-09-09 00:54:42.669 +07:00 [INF] Starting IdentityServer4 version 2.5.3.0
2019-09-09 00:54:42.957 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-09-09 00:54:42.958 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-09-09 00:54:42.958 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-09-09 00:54:42.958 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-09-09 00:54:42.959 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-09-09 00:54:42.959 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-09-09 00:54:43.313 +07:00 [DBG] Starting grant removal
2019-09-09 00:54:44.184 +07:00 [DBG] Login Url: /Account/Login
2019-09-09 00:54:44.187 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-09-09 00:54:44.189 +07:00 [DBG] Logout Url: /Account/Logout
2019-09-09 00:54:44.189 +07:00 [DBG] ConsentUrl Url: /consent
2019-09-09 00:54:44.190 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-09-09 00:54:44.191 +07:00 [DBG] Error Url: /home/error
2019-09-09 00:54:44.192 +07:00 [DBG] Error Id Parameter: errorId
2019-09-09 00:54:55.746 +07:00 [DBG] Augmenting SignInContext
2019-09-09 00:54:55.749 +07:00 [DBG] Adding idp claim with value: local
2019-09-09 00:54:55.750 +07:00 [DBG] Adding amr claim with value: pwd
2019-09-09 00:54:55.750 +07:00 [DBG] Adding auth_time claim with value: 1567965295
2019-09-09 00:54:55.775 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-09-09 00:54:55.812 +07:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"2a0d3f81-38cf-4532-b875-df215eb89e16","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLPKGMGJFP2K:00000003","TimeStamp":"2019-09-08T17:54:55.0000000Z","ProcessId":9660,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-09-09 00:55:03.170 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-09-09 00:55:03.176 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-09-09 00:55:03.177 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-09-09 00:55:03.183 +07:00 [DBG] Start discovery request
2019-09-09 00:55:04.024 +07:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-09-09 00:55:04.165 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-09-09 00:55:04.167 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-09-09 00:55:04.168 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-09-09 00:55:04.174 +07:00 [DBG] Start key discovery request
2019-09-09 00:55:04.235 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-09-09 00:55:04.242 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-09-09 00:55:04.243 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-09-09 00:55:04.250 +07:00 [DBG] Start authorize request
2019-09-09 00:55:04.258 +07:00 [DBG] User in authorize request: 2a0d3f81-38cf-4532-b875-df215eb89e16
2019-09-09 00:55:04.266 +07:00 [DBG] Start authorize request protocol validation
2019-09-09 00:55:04.589 +07:00 [DBG] mvc found in database: true
2019-09-09 00:55:04.603 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-09-09 00:55:04.625 +07:00 [ERR] Invalid redirect_uri: http://localhost:5001/signin-oidc
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"2a0d3f81-38cf-4532-b875-df215eb89e16","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5001/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"637035621042076036.MDM2YWNhNWQtMmZhMS00ZmUzLTg3YTgtYjUwZjZhZWYwNGY5NzE0NmI2MDEtNDQ2Mi00MjdhLWE1YzctYjQ0YTRlMDMyMDhi","state":"CfDJ8ANVG-xYhohNub-MDQHW8J-iEG1uORXtacZKCvFC0ZZs5Q3Btt_Xg2CZqCT_WXxUjE_xgW11qPjVWQ6SGNhyJu10OJN7MMMc2X-FP_fpPBYZ9OijkBvokgnSsl8P-qi0lgm9BhWASjXobJS-BWf7e0qeunZ8wR-6kCZ9KSWw2yv6qgL-sONmW30uA78D3Ri52YF2cqyk51FZYT_LAEuJO0xcf1mIYRaJQG3KtulpKXOM31qFZKMuKzLyQU7bw2VCmPx1O3Z3dux3E15Bmp8H-ovUTEkM_IdcPGdxAZ4zJosHxsUP6wChH-Mr8mKsyXSG03khbaIl5y9GcS6ALwzz-XA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-09-09 00:55:04.642 +07:00 [ERR] Request validation failed
2019-09-09 00:55:04.643 +07:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"2a0d3f81-38cf-4532-b875-df215eb89e16","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5001/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"637035621042076036.MDM2YWNhNWQtMmZhMS00ZmUzLTg3YTgtYjUwZjZhZWYwNGY5NzE0NmI2MDEtNDQ2Mi00MjdhLWE1YzctYjQ0YTRlMDMyMDhi","state":"CfDJ8ANVG-xYhohNub-MDQHW8J-iEG1uORXtacZKCvFC0ZZs5Q3Btt_Xg2CZqCT_WXxUjE_xgW11qPjVWQ6SGNhyJu10OJN7MMMc2X-FP_fpPBYZ9OijkBvokgnSsl8P-qi0lgm9BhWASjXobJS-BWf7e0qeunZ8wR-6kCZ9KSWw2yv6qgL-sONmW30uA78D3Ri52YF2cqyk51FZYT_LAEuJO0xcf1mIYRaJQG3KtulpKXOM31qFZKMuKzLyQU7bw2VCmPx1O3Z3dux3E15Bmp8H-ovUTEkM_IdcPGdxAZ4zJosHxsUP6wChH-Mr8mKsyXSG03khbaIl5y9GcS6ALwzz-XA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-09-09 00:55:04.654 +07:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Authorize","SubjectId":"2a0d3f81-38cf-4532-b875-df215eb89e16","Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLPKGMGJFP2M:00000001","TimeStamp":"2019-09-08T17:55:04.0000000Z","ProcessId":9660,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
